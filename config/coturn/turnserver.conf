# coturn TURN server configuration for PrivMsg
# This enables WebRTC calls to work through NAT/firewalls

# TURN server listening port
listening-port=3478

# TLS/DTLS listening port
tls-listening-port=5349

# Realm (set to your domain)
realm=privmsg.local

# Server name
server-name=privmsg-turn

# Use fingerprint in TURN message
fingerprint

# Use long-term credential mechanism
lt-cred-mech

# Static user credentials (for simplicity)
# In production, use database authentication
user=privmsg:your-secret-password

# Disable CLI
no-cli

# Disable TCP relay (only use UDP for media)
no-tcp-relay

# Allow loopback (for local testing)
# Remove in production
# no-loopback-peers

# Denied peer address
# Add your internal network ranges
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255

# Allowed peer address (public IPs only)
# allowed-peer-ip=0.0.0.0-255.255.255.255

# Relay port range
min-port=49152
max-port=49200

# Log file
# log-file=/var/log/coturn/turnserver.log

# Verbose logging (disable in production)
verbose

# Don't request syslog
no-syslog

# Use stdout for logging
log-file=stdout

# External IP (set to your VPS public IP)
# external-ip=YOUR_PUBLIC_IP

# Relay threads
relay-threads=4

# Max users per relay
max-bps=0

# Total bandwidth quota (0 = no limit)
total-quota=0

# User quota (0 = no limit)
user-quota=0

# Stale nonce timeout
stale-nonce=600

# Allocation lifetime
channel-lifetime=600
